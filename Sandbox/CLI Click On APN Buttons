/**
 * @NApiVersion 2.x
 * @NScriptType ClientScript
 * @NModuleScope SameAccount
 */ 
    /**
     * Function to be executed after page is initialized.
     *
     * @param {Object} scriptContext
     * @param {Record} scriptContext.currentRecord - Current form record
     * @param {string} scriptContext.mode - The mode in which the record is being accessed (create, copy, or edit)
     *
     * @since 2015.2
     */
	 define(['N/record', 'N/search','N/currentRecord'],
/**
 * @param {record} record
 * @param {search} search
 */
function(record, search,currentRecord) {
	
	function pageInit(context)
	{
		
	}
    function clickOnCancel(recId)
	{
		//alert(recId);
		
		//var currentRecordType = context.currentRecord.type;
		//alert(currentRecordType);
		var rec = currentRecord.get();
		//alert(rec);
		var retVal = confirm("Do you want to Cancel ?");
		//alert('return value' +retVal);
               if( retVal == true ) {
				   //alert(retVal);
				   var id = record.submitFields({
					type: record.Type.CAMPAIGN,
					id: recId,
					values: {
						custevent_sankara_campaignstatus: 3,
						isinactive: true
					},
				options: {
				enableSourcing: false,
				ignoreMandatoryFields : true
				}
			});
			window.location.reload();
			//window.onbeforeunload = null;
				//rec.setValue({fieldId:'custevent_sankara_campaignstatus',value: 3});
				/*var id = rec.save({
					  enableSourcing: true,
					  ignoreMandatoryFields: true
					});
					*/
					
				//alert('here..cancelled');
				return true;
				
				  
			
			//alert('id'+id);
			

				 //rec.setValue({fieldId:'custevent_sankara_campaignstatus',value: 3}); 
               } else {
                  //document.write ("User does not want to continue!");
                  return false;
               }
	}
	
	function refresh() {
            var s_URL = url.resolveScript({
                scriptId: 'customscript_tessolve_su_approvalprocess',
                deploymentId: 'customdeploy_tessolve_su_approvalprocess'
            }); //suitlet id 		
            window.onbeforeunload = null;
            window.open(s_URL, '_self', null, null);
        }
    return {
		pageInit: pageInit,
        clickOnCancel:clickOnCancel
    };
    
});
